<!DOCTYPE html>
<html>
<head>
	<title>Find the buried treasure!</title>
</head>
<body>
<h1 id ="heading"> "Find the buried treasure!"</h1>
 <img id = "map" width = 500 height = 500 src="http://nostarch.com/images/treasuremap.png">
 <p id = "distance"></p>
 <script src="https://code.jquery.com/jquery-2.1.0.js"></script>
 <script>
 	function game(){
 		var self = this;
 		self.getRandomNumber = function(size){
	 		return Math.floor(Math.random() * size )
	 	};

		self.width = 500;
		self.height = 500;

		self.target = {};

		self.getTarget = function(){
			target.x = getRandomNumber(width);
			target.y = getRandomNumber(height);
		}


		self.distance = {};
		self.distance.getDistance = function(event, target){
			var diffX = event.offsetX - target.x;
			var diffY = event.offsetY - target.y;
			return Math.sqrt((diffX * diffX) + (diffY * diffY));
		};

		self.distance.countingClicks = 0;
		self.distance.getDistanceHint = function (distance) {
			if (distance < 10) {
				return "Boiling hot";
			} 
			else if (distance < 15){
				return "Really, really, hot"
			}
			else if (distance < 20) {
				return "Really hot";
			}

			else if (distance < 40) {
				return "Hot";
			}
			 else if (distance < 80) {
				return "Warm";
			}
			 else if (distance < 160) {
				return "Cold";
			}
			 else if (distance < 320) {
				return "Really cold";

			}
			else if ( distance < 360){
				return "Really, really cold"
			}
			 else {
				return "Freezing";
			}

		};

		gameover = function(){
		if(countingClicks => 65)
			return confirm("Gameover");
		}

		processClick = function(event){
			var distance = getDistance(event, target);
			if (distance < 8) {
				alert("Found the treasure in " + countingClicks + " clicks!");
			}
			else
			{
				var distanceHint = getDistanceHint(distance) + ', the number of clicks: ' + countingClicks;
				$("#distance").text(distanceHint);
				countingClicks++;
				if(countingClicks >= 5){
					if(true == confirm("Gameover")){
						countingClicks = 0 ;
						getTarget();
					}
				}	
			}
	};

	$("#map").click(function(event){
		game.processClick(event);
	});

 </script>
 <script type="text/javascript"> 

 </script>
 <script type="text/javascript">/*function IfPlayerDone(){
	var confirm_Done = confirm("Game Complete. Do you want to play again?");
	if(confirm_Done == true)
		return 	
	};*/
	/*else{
		return ("ok!Good game:P play again soon!");
	}
}*/
</script>
</body>
</html>